<style>
	.flex-row {
		display: flex;
		justify-content: space-between;
		align-items: flex-start;
	}
	
	.due-table-container-custom,
	.customer-info-custom,
	.statement-details-custom {
		flex: 1;
		margin: 0 10px;
	}
	
	.due-table-custom {
		width: 100%;
		border-collapse: collapse;
	}
	
	.due-table-custom th,
	.due-table-custom td {
		border: 1px solid #ccc;
		padding: 8px;
		text-align: left;
	}
	
	.customer-info-custom,
	.statement-details-custom {
		padding: 10px;
	}
	
	h3 {
		margin-bottom: 5px;
	}
	
	p {
		margin: 2px 0;
	}
	
	.due-table-custom {
		margin-top: 20px;
	}
	
	.header-custom {
		text-align: right;
		margin-bottom: 10px;
	}
	
	.invoice-table-custom {
		width: 100%;
		border-collapse: collapse;
		margin-top: 20px;
	}
	
	.invoice-table-custom th,
	.invoice-table-custom td {
		border: 1px solid #ccc;
		padding: 6px;
		text-align: left;
	}
	
	.payment-terms-cntner {
		margin-top: 40px;
	}
	
	.paymet-table-container {
		width: 100%;
		border-collapse: collapse;
		margin-top: 10px;
	}
	
	.paymet-table-container th,
	.paymet-table-container td {
		border: 1px solid #ccc;
		padding: 6px;
		text-align: left;
	}
	
	.footer-custom {
		margin-top: 20px;
	}
	
	.legal-notice-custom {
		font-size: 12px;
		margin-top: 10px;
	}
	
	.contact-details-custom {
		margin-top: 10px;
		font-size: 12px;
	}
	
	</style>
	<div class="page-break">

	<div>
		{% if letter_head.content %}
		<div class="letter-head text-center">{{ letter_head.content }}</div>
		<hr style="height:2px;border-width:0;color:black;background-color:black;">
		{% endif %}
	</div>
	<div id="footer-html" class="visible-pdf">
		{% if letter_head.footer %}
		<div class="letter-head-footer">
			<hr style="border-width:0;color:black;background-color:black;padding-bottom:2px;">
			{{ letter_head.footer }}
		</div>
		{% endif %}
	</div>
	
	<div class="statement-container-custom">
		<div class="header-custom">
			<h3>Customer Statement</h3>
			<p>{{ entry }}</p>
		</div>
		<hr/>
		{% set customer_doc = frappe.get_doc("Customer", entry) %}

		<div class="ageing-report-container">
	
			<div class="flex-row">
	
				<div class="customer-info-custom">
					<h3>Customer Name:</h3>
					<p>{{ customer_doc.customer_name }}</p>
					
					<h3>VAT Number:</h3>
					<p>{{ customer_doc.tax_id or 'N/A' }}</p>
					
					<h3>Customer Address:</h3>
					{% if customer_doc.customer_primary_address %}
						{% set address_doc = frappe.get_doc("Address",customer_doc.customer_primary_address)  %}
						<p>{{ address_doc.address_title }}</p>
						<p>{{ address_doc.address_line1 }}</p>
						<p>{{ address_doc.address_line2 or '' }}</p>
						<p>{{ address_doc.city }}</p>
						<p>{{ address_doc.state or '' }}</p>
						<p>{{ address_doc.pincode or '' }}</p>
						<p>{{ address_doc.country }}</p>
						<p>Phone: {{ address_doc.phone or 'N/A' }}</p>
						<p>Email: {{ address_doc.email_id or 'N/A' }}</p>
					{% endif %}
				</div>
				<div class="statement-details-custom">
            <h3>Statement Date:</h3>
            <p>{{ frappe.utils.today() }}</p>

            <h3>Contact Person:</h3>
            <p>{{ customer_doc.contact_name or 'N/A' }}</p>

            <h3>Contact Email:</h3>
            <p>{{ customer_doc.contact_email or 'N/A' }}</p>

            <h3>VAT Category:</h3>
            <p>{{ customer_doc.vat_category or 'N/A' }}</p>
				</div>
				{% if ageing %}
				<div class="due-table-container-custom">
					<table class="due-table-custom">
						<thead>
							<tr>
								<th>Due</th>
								<th>Amount</th>
							</tr>
						</thead>
						<tbody>
							<tr>
								<td>0 - 30 Days</td>
								<td>{{ frappe.utils.fmt_money(ageing.range1, currency=filters.presentation_currency) }}</td>
							</tr>
							<tr>
								<td>30 - 60 Days</td>
								<td>{{ frappe.utils.fmt_money(ageing.range2, currency=filters.presentation_currency) }}</td>
							</tr>
							<tr>
								<td>60 - 90 Days</td>
								<td>{{ frappe.utils.fmt_money(ageing.range3, currency=filters.presentation_currency) }}</td>
							</tr>
							<tr>
								<td>90 - 120 Days</td>
								<td>{{ frappe.utils.fmt_money(ageing.range4, currency=filters.presentation_currency) }}</td>
							</tr>
							<tr>
								<td>Above 120 Days</td>
								<td>{{ frappe.utils.fmt_money(ageing.range5, currency=filters.presentation_currency) }}</td>
							</tr>
						</tbody>
					</table>
				</div>
				{% endif %}
			</div>
			
		</div>
	
		<table class="invoice-table-custom">
			<thead>
				<tr>
					<th style="width: 12%">{{ _("Date") }}</th>
					<th style="width: 15%">{{ _("Invoice | Credit") }}</th>
					<th style="width: 15%">{{ _("Debit") }}</th>
					<th style="width: 15%">{{ _("Credit") }}</th>
					<th style="width: 18%">{{ _("Balance") }}</th>
				</tr>
			</thead>
			<tbody>
			{% for row in data %}
				<tr>
				{% if (row.posting_date) %}
					<td>{{ frappe.format(row.posting_date, 'Date') }}</td>
					<td>{{ row.voucher_type }}<br>{{ row.voucher_no }}</td>
					<td style="text-align: right">{{ frappe.utils.fmt_money(row.debit, currency=filters.presentation_currency) }}</td>
					<td style="text-align: right">{{ frappe.utils.fmt_money(row.credit, currency=filters.presentation_currency) }}</td>
				{% else %}
					<td></td>
					<td></td>
					<td style="text-align: right">{{ row.get('account', '') and frappe.utils.fmt_money(row.debit, currency=filters.presentation_currency) }}</td>
					<td style="text-align: right">{{ row.get('account', '') and frappe.utils.fmt_money(row.credit, currency=filters.presentation_currency) }}</td>
				{% endif %}
					<td style="text-align: right">{{ frappe.utils.fmt_money(row.balance, currency=filters.presentation_currency) }}</td>
				</tr>
			{% endfor %}
			</tbody>
		</table>
	
		<!-- Moved payment terms near the footer -->
		<div class="payment-terms-cntner">
			<h3>Payment Terms:</h3>
			<table class="paymet-table-container">
				<thead>
					<tr>
						<th>Payment Terms</th>
						<th>Descriptions</th>
						<th>Discount</th>
					</tr>
				</thead>
				<tbody>
					<tr>
						<td>30 Days</td>
						<td>Payment in full within 30 days of invoice</td>
						<td>0</td>
					</tr>
				</tbody>
			</table>
		</div>
	
		<div class="footer-custom">
			<p class="legal-notice-custom">
				Please note that this document and the contents thereof are governed by our comprehensive Terms and Conditions. The full terms are available upon request and form an integral part of this transaction. For further information or to request a copy of our standard Terms and Conditions, please email our legal department at <a href="mailto:legal@lcvssc.com">legal@lcvssc.com</a>.
			</p>
			<div class="contact-details-custom">
				<div>11 Flamink Road | Alrode</div>
				<div>Johannesburg | Gauteng | 1451</div>
				<div>+27 11 894 1640</div>
				<div><a href="mailto:accounts@lcvssc.com">accounts@lcvssc.com</a></div>
				<div><a href="mailto:info@lcvssc.com">info@lcvssc.com</a></div>
			</div>
		</div>
	</div>
</div>